<html>
<body>
<button id = "find-me">Show my location</button><br/>
<p id = "status">MAPS:</p>
OSM: <a id = "map-link_osm" target="_blank"></a><br>
GOOGLE: <a id = "map-link_ggl" target="_blank"></a><br>
BING: <a id = "map-link_bing" target="_blank"></a><br>
YANDEX: <a id = "map-link_ydx" target="_blank"></a><br>

<script>
function geoFindMe() {

  const status = document.querySelector('#status');
  const map_links=['#map-link_osm',
	'#map-link_ggl',
	'#map-link_bing',
	'#map-link_ydx'];


  function success(position) {
	const latitude  = position.coords.latitude;
	const longitude = position.coords.longitude;

	status.textContent = '';

	for(let i=0; i < map_links.length; i ++) {
  		const mapLink = document.querySelector(map_links[i]);
		mapLink.href = '';
		mapLink.textContent = '';

		switch (map_links[i]) {
			case '#map-link_osm': 
				mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
				mapLink.textContent = `${longitude}, ${latitude}`;
				break;
			case '#map-link_ggl': 
				mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
				mapLink.textContent = `${longitude}, ${latitude}`;
				break;
			case '#map-link_bing': 
				mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
				mapLink.textContent = `${longitude}, ${latitude}`;
				break;
			case '#map-link_ydx': 
				mapLink.href = `https://www.openstreetmap.org/#map=18/${latitude}/${longitude}`;
				mapLink.textContent = `${longitude}, ${latitude}`;
				break;
		}
	}	
  }



 function error() {
    status.textContent = 'Unable to retrieve your location';
  }

  if (!navigator.geolocation) {
    status.textContent = 'Geolocation is not supported by your browser';
  } else {
    status.textContent = 'Locating…';
    navigator.geolocation.getCurrentPosition(success, error);
  }

}

document.querySelector('#find-me').addEventListener('click', geoFindMe);


</script>
</body>
</html>