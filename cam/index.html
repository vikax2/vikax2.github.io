<html>      
  
<head>                                                                                                    
<!--Copyright (c) 2013 Valentin Kucherbaev (ViKaX).All rights reserved .-->
<meta id="meta00" http-equiv='Content-Type' content='text/html;' charset='utf-8'>
    <script type="text/javascript" src="./jquery.min.js"></script>


<style>

body {
  background: #000000;
}

.flash{ 
    position:fixed; 
    top:0;
    left:0;
    width:100%;
    height:100%;
    background-color:#fff;
 }
</style>
</head>

<body>

<video autoplay></video> 

<script> 
	const constraints = { video: true }; 
	const video = document.querySelector('video'); 
</script> 


<script> 
function hasGetUserMedia() { 
	return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia); 
} 

if (hasGetUserMedia()) { 
	// Good to go! 
	//alert('getUserMedia() is  supported by your browser'); 

 	navigator.mediaDevices.enumerateDevices().then(devices => {
  
    		const cameras = devices.filter((device) => device.kind === 'videoinput');

    		if (cameras.length === 0) {
      			alert( 'No camera found on this device.');
    		}
    		const camera = cameras[cameras.length - 1];


 // Create stream and get video track
    navigator.mediaDevices.getUserMedia({
      video: {
        deviceId: camera.deviceId,
        facingMode: ['user', 'environment'],
        height: {ideal: 480},
        width: {ideal: 640}
      }
    }).then(stream => {
//      const track = stream.getVideoTracks()[0];

      //Create image capture object and get camera capabilities
//      const imageCapture = new ImageCapture(track)
//      const photoCapabilities = imageCapture.getPhotoCapabilities().then(() => {


	const track = stream.getVideoTracks()[0];

      //Create image capture object and get camera capabilities
      const imageCapture = new ImageCapture(track)
      const photoCapabilities = imageCapture.getPhotoCapabilities().then(() => {

		alert("000");

	});



		video.srcObject = stream;
	//	alert("111");        

	});


	//	alert("222");
	});

	//navigator.mediaDevices.getUserMedia(constraints).then((stream) => {
		//video.srcObject = stream;
	//	}); 
} else { 
	alert('getUserMedia() is not supported by your browser'); 
} 

</script>

<button class="switch">On / Off</button>



</body>
</html>



